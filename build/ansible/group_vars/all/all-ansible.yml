---
###################################################################################################
# Ansible specifi definitions
###################################################################################################


# -------------------------------------------------------------------------------------------------
# Adds version checks to Dockerfile
# -------------------------------------------------------------------------------------------------
debug: True


# -------------------------------------------------------------------------------------------------
# Available PHP versions (see inventory)
# -------------------------------------------------------------------------------------------------
php_all_versions:
  - 5.2
  - 5.3
  - 5.4
  - 5.5
  - 5.6
  - 7.0
  - 7.1
  - 7.2
  - 7.3
  - 7.4
  - 8.0


# -------------------------------------------------------------------------------------------------
# Docker file paths for each version for base, mods, prod & work
# -------------------------------------------------------------------------------------------------
template_dockerfiles:
  - src: DOCKERFILES/Dockerfile-base.j2
    dst: "../../Dockerfiles/base/Dockerfile-{{ php_version }}"
  - src: DOCKERFILES/Dockerfile-mods.j2
    dst: "../../Dockerfiles/mods/Dockerfile-{{ php_version }}"
  - src: DOCKERFILES/Dockerfile-prod.j2
    dst: "../../Dockerfiles/prod/Dockerfile-{{ php_version }}"
  - src: DOCKERFILES/Dockerfile-work.j2
    dst: "../../Dockerfiles/work/Dockerfile-{{ php_version }}"


# -------------------------------------------------------------------------------------------------
# Assign php.ini & php-fpm.conf to PHP versions
# -------------------------------------------------------------------------------------------------
template_configurations:
  # php.ini
  - src: CONFIGURATIONS/php.ini.j2
    dst: "../../Dockerfiles/base/data/php-ini.d/php-{{ php_version }}.ini"
    cfg: "{{ php_settings_ini }}"
    key: base
    alt: base
  - src: CONFIGURATIONS/php.ini.j2
    dst: "../../Dockerfiles/work/data/php-ini.d/php-{{ php_version }}.ini"
    cfg: "{{ php_settings_ini }}"
    key: work
    alt: base  # Alternative key to use when definition is not set in 'work'
  # php-fpm.conf
  - src: CONFIGURATIONS/php-fpm.conf.j2
    dst: "../../Dockerfiles/base/data/php-fpm.conf/php-fpm-{{ php_version }}.conf"
    cfg: "{{ php_settings_fpm }}"
    key: base
    alt: base
  - src: CONFIGURATIONS/php-fpm.conf.j2
    dst: "../../Dockerfiles/work/data/php-fpm.conf/php-fpm-{{ php_version }}.conf"
    cfg: "{{ php_settings_fpm }}"
    key: work
    alt: base
